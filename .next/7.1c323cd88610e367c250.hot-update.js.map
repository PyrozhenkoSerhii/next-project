{"version":3,"file":"7.1c323cd88610e367c250.hot-update.js","sources":["webpack:///assets/config/api.js","webpack:///components/user/login.js"],"sourcesContent":["export const API_URL = 'https://obscure-stream-46512.herokuapp.com/';\r\nexport const PRODUCTS = 'products/';\r\nexport const CUSTOMERS = 'customers/';\n\n\n// WEBPACK FOOTER //\n// assets/config/api.js","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {saveUser, saveToken} from \"../../redux/actions/user\";\r\nimport axios from 'axios';\r\n\r\nimport {API_URL, CUSTOMERS} from \"../../assets/config/api\";\r\n\r\nimport {FormGroup} from 'react-bootstrap';\r\nimport {ControlLabel} from 'react-bootstrap';\r\nimport {FormControl} from 'react-bootstrap';\r\nimport {Button} from 'react-bootstrap';\r\n\r\n\r\nclass Login extends React.Component {\r\n    config = {\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n        }\r\n    };\r\n\r\n    constructor(props) {\r\n        super();\r\n        this.state = {\r\n            username: '',\r\n            password: '',\r\n            redirect: false\r\n        }\r\n    }\r\n\r\n    handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        const customer = {username: this.state.username, password: this.state.password};\r\n        axios.post(API_URL + CUSTOMERS + 'authenticate', {customer: customer}, this.config)\r\n            .then((response) => {\r\n                console.log(response);\r\n                if (response.data.success) {\r\n                    this.props.saveUser(response.data.customer);\r\n                    this.props.saveToken(response.data.token);\r\n                    this.setState({\r\n                        redirect: true,\r\n                    })\r\n                    console.log(response);\r\n                } else {\r\n                    console.log('wrong user data');\r\n                }\r\n            })\r\n    };\r\n\r\n    handleChange = (e) => {\r\n        this.setState({\r\n            [e.target.id]: e.target.value\r\n        })\r\n    };\r\n\r\n    validateForm = () => {\r\n        return this.state.username.length > 2 && this.state.password.length > 2;\r\n    };\r\n\r\n    render() {\r\n        if (this.state.redirect) {\r\n            //todo redirect\r\n        }\r\n        return (\r\n            <div>\r\n                <form onSubmit={this.handleSubmit}>\r\n                    <FormGroup controlId=\"username\" bsSize=\"large\">\r\n                        <ControlLabel>Username</ControlLabel>\r\n                        <FormControl type=\"text\" value={this.state.username} onChange={this.handleChange}/>\r\n                    </FormGroup>\r\n                    <FormGroup controlId=\"password\" bsSize=\"large\">\r\n                        <ControlLabel>Password</ControlLabel>\r\n                        <FormControl type=\"password\" value={this.state.password} onChange={this.handleChange}/>\r\n                    </FormGroup>\r\n                    <Button disabled={!this.validateForm()} className=\"btn btn-success\" type=\"submit\">Login</Button>\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        saveUser: user => dispatch(saveUser(user)),\r\n        saveToken: token => dispatch(saveToken(token))\r\n    }\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(Login);\n\n\n// WEBPACK FOOTER //\n// components/user/login.js"],"mappings":";;;;;;;;;;;;;;;AAAA;AACA;AACA;;;;;;;;;;;;AAFA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACFA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;;;;;AAOA;AAAA;AACA;AADA;AACA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AALA;AACA;AADA;AADA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AACA;AADA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AA1BA;AAAA;AAAA;AAAA;AAAA;AAAA;AA6BA;AAGA;AAhCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAmCA;AACA;AApCA;AAEA;AACA;AACA;AACA;AAHA;AAFA;AAOA;AACA;;;AA8BA;AACA;AAEA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;;;;;;;;;;;AAhEA;AACA;AAkEA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAFA;AAIA;AACA;AACA;AACA;AADA;;;;;;;;;;;;AA1EA;AAmEA;;;;;;;;;;A","sourceRoot":""}