{"version":3,"file":"4.de42886cbefda664462d.hot-update.js","sources":["webpack:///pages/product/view.js"],"sourcesContent":["import Layout from '../../components/layout';\r\nimport fetch from 'isomorphic-unfetch';\r\nimport {API_URL, PRODUCTS} from \"../../assets/config/api\";\r\nimport React from 'react';\r\nimport {setCount} from '../../redux/actions/order';\r\nimport {connect} from \"react-redux\";\r\nimport Link from 'next/link';\r\n\r\nclass View extends React.Component {\r\n    static async getInitialProps(context) {\r\n        const res = await fetch(API_URL + PRODUCTS + 'getById', {\r\n            method: 'POST',\r\n            body: JSON.stringify({id: context.query.id}),\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        });\r\n        const data = await res.json();\r\n        return {product: data.product};\r\n    }\r\n\r\n    constructor(props) {\r\n        super();\r\n        console.log(props);\r\n        this.state = {\r\n            localCount: props.initialCount\r\n        }\r\n    }\r\n\r\n    increaseCount = () => {\r\n        const count = this.state.localCount + 1;\r\n        this.setState({\r\n            localCount: count\r\n        })\r\n    };\r\n    decreaseCount = () => {\r\n        let count = this.state.localCount;\r\n        if (count > 0) {\r\n            count--;\r\n        }\r\n        this.setState({\r\n            localCount: count\r\n        })\r\n    };\r\n    orderProduct = () => {\r\n        console.log('order');\r\n        this.props.order(this.state.localCount);\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <Layout>\r\n                <h3 style={{textAlign: 'center'}}>Product View</h3>\r\n                <hr/>\r\n                <h5>{this.props.product.title}</h5>\r\n                <h6>Specification</h6>\r\n                <ul>\r\n                    {this.props.product.specification.map((element) => (\r\n                        <li key={element.name}>{element.name}:{element.value}</li>\r\n                    ))}\r\n                </ul>\r\n                <hr/>\r\n                <h4>Order</h4>\r\n                <button onClick={this.decreaseCount}>Decrease</button>\r\n                <h4>{this.state.count}</h4>\r\n                <button onClick={this.increaseCount}>Increase</button>\r\n                {this.state.localCount}\r\n                <a onClick={this.orderProduct}>\r\n                    <Link href=\"/product/order\">\r\n                        <button className=\"btn btn-success\">Order</button>\r\n                    </Link>\r\n                </a>\r\n            </Layout>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        order: productCount => dispatch(setCount(productCount))\r\n    }\r\n};\r\n\r\nconst mapStateToProps = state => {\r\n    return {initialCount: state.product.productCount}\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(View);\n\n\n// WEBPACK FOOTER //\n// pages/product/view.js"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;AACA;;;;;;;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AADA;AAHA;AACA;;AADA;;AAOA;AACA;;AADA;AACA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;AAEA;AAAA;AACA;AADA;AACA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AASA;AACA;AAAA;AACA;AADA;AAGA;AAbA;AAAA;AAAA;AAAA;AAAA;AAAA;AAeA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AADA;AAGA;AAtBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAwBA;AACA;AAAA;AACA;AA1BA;AAEA;AACA;AACA;AADA;AAHA;AAMA;AACA;;;AAqBA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAIA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;;;;;;;;;;;AAlEA;AACA;AAoEA;AACA;AACA;AAAA;AAAA;AADA;AAGA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AADA;;;;;;;;;;;;AA/EA;AAqEA;AAMA;;;;;;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}